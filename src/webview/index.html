<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>è¯­è¨€å­¦ä¹ åŠ©æ‰‹ - æç®€ç§‘æŠ€é£</title>
  <link rel="stylesheet" href="${vscodeUri}/index.css">
 
</head>

<body>

    <div class="container">
    <h1>è‹±æ–‡ç¿»è¯‘è®°å¿†å¡ç‰‡</h1>

    <div class="input-group">
      <textarea id="englishInput" placeholder="è¾“å…¥è‹±æ–‡å¥å­æˆ–å•è¯..."></textarea>
      <button onclick="translateAndSave()">ç¿»è¯‘å¹¶ä¿å­˜</button>
    </div>

    <div class="result-box" id="resultBox" style="display:none;">
      <p><strong>è‹±æ–‡ï¼š</strong><span id="showEn"></span></p>
      <p><strong>ä¸­æ–‡ï¼š</strong><span id="showZh"></span></p>
      <p><strong>å¥å‹ï¼š</strong><span id="showType"></span></p>
      <button onclick="speakText(document.getElementById('showEn').innerText)">ğŸ”Š å‘éŸ³</button>
    </div>

    <div class="flashcard-list" id="flashcardList">
      <h2>å·²ä¿å­˜å¡ç‰‡</h2>
    </div>

    <div class="review-mode">
      <button onclick="startReview()">è¿›å…¥å¤ä¹ æ¨¡å¼</button>
      <div class="flashcard-review" id="reviewCard" style="display:none;">
        <p id="reviewContent">ç‚¹å‡»å¼€å§‹å¤ä¹ </p>
        <p class="flashcard-type" id="reviewType"></p>
        <button onclick="toggleAnswer()">æ˜¾ç¤ºç­”æ¡ˆ</button>
        <button onclick="nextCard()">ä¸‹ä¸€é¢˜</button>
        <button onclick="speakCurrent()">ğŸ”Š å½“å‰å‘éŸ³</button>
      </div>
    </div>
  </div>


  <script src="${vscodeUri}/libs/tiny-nlp.js"></script>
  <script src="${vscodeUri}/index.js"></script>
  <!-- <script>


    let isFlipped = false;

    function toggleCard() {
      const cardInner = document.getElementById('cardInner');
      isFlipped = !isFlipped;
      cardInner.style.transform = isFlipped ? 'rotateY(180deg)' : 'rotateY(0deg)';
    }

    function analyzeSentenceStructure(sentence) {
      if (typeof TinyNLP === 'undefined') {
        return 'âš ï¸ æœ¬åœ° NLP æ¨¡å—æœªåŠ è½½';
      }

      try {
        const result = TinyNLP.analyze(sentence);

        return [
          result.subject ? `ä¸»è¯­: ${result.subject}` : '',
          result.verb ? `åŠ¨è¯: ${result.verb}` : '',
          result.object ? `å®¾è¯­: ${result.object}` : '',
          result.tense ? `æ—¶æ€: ${result.tense}` : ''
        ].filter(Boolean).join('\n') || 'æ— æ³•è¯†åˆ«å¥å‹ç»“æ„';
      } catch (e) {
        return 'è¯­æ³•åˆ†æå‡ºé”™: ' + e.message;
      }
    }

    const vscode = acquireVsCodeApi();
    let sentences = [];
    let currentCardIndex = 0;

    function queryTranslation() {
      const input = document.getElementById('sentenceInput').value.trim();
      if (!input) {
        alert("è¯·è¾“å…¥è‹±æ–‡å¥å­");
        return;
      }

      vscode.postMessage({
        command: 'translate',
        text: input,
        original: input
      });
    }

    function saveSentence() {
      const input = document.getElementById('sentenceInput').value.trim();
      if (!input) {
        alert("è¯·è¾“å…¥è‹±æ–‡å¥å­");
        return;
      }

      const translation = document.getElementById('translation').innerText.replace('ç¿»è¯‘: ', '');
      const structure = document.getElementById('structure').innerText.replace('è¯­æ³•ç»“æ„:\n', '');

      vscode.postMessage({
        command: 'saveSentence',
        data: {
          original: input,
          translation: translation,
          structure: structure
        }
      });

      // æ¸…ç©ºè¾“å…¥
      document.getElementById('sentenceInput').value = '';
      document.getElementById('translation').innerText = '';
      document.getElementById('structure').innerText = '';
    }

    function startReview() {
      vscode.postMessage({ command: 'getHistory' });
    }

    window.addEventListener('message', event => {
      const message = event.data;

      if (message.command === 'translationResult') {
        document.getElementById('translation').innerText = 'ç¿»è¯‘: ' + message.text;
        document.getElementById('structure').innerText = 'è¯­æ³•ç»“æ„:\n' + analyzeSentenceStructure(message.original);
      }

      if (message.command === 'error') {
        document.getElementById('translation').innerText = 'é”™è¯¯: ' + message.text;
      }

      if (message.command === 'historyData') {
        sentences = message.data;
        currentCardIndex = 0;
        document.getElementById('reviewCard').style.display = 'block';
        showCurrentCard();
      }
    });

    function showCurrentCard() {
      if (sentences.length === 0) return;

      const item = sentences[currentCardIndex];

      document.getElementById('cardTextFront').innerText = item.original;
      document.getElementById('cardTextBack').innerText = `ç¿»è¯‘: ${item.translation}\n\nå¥å‹: \n${item.structure}`;
      document.getElementById('cardIndex').innerText = `${currentCardIndex + 1} / ${sentences.length}`;
      document.getElementById('cardProgress').setAttribute('max', sentences.length);
      document.getElementById('cardProgress').setAttribute('value', currentCardIndex + 1);
      isFlipped = false;
      document.getElementById('cardInner').style.transform = 'rotateY(0deg)';
    }

    function nextCard() {
      currentCardIndex = Math.min(currentCardIndex + 1, sentences.length - 1);
      showCurrentCard();
    }

    function prevCard() {
      currentCardIndex = Math.max(currentCardIndex - 1, 0);
      showCurrentCard();
    }

    function closeReview() {
      document.getElementById('reviewCard').style.display = 'none';
    }

    function speakSentence() {
      const input = document.getElementById('sentenceInput').value.trim();
      if (!input) {
        alert("è¯·è¾“å…¥è‹±æ–‡å¥å­");
        return;
      }

      const utterance = new SpeechSynthesisUtterance(input);
      utterance.lang = 'en-US';
      speechSynthesis.speak(utterance);
    }
  </script> -->
</body>

</html>